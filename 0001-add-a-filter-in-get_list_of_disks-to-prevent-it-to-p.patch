From a0abe195f5c015c09b487a5213d49a77901156e0 Mon Sep 17 00:00:00 2001
From: Luca Belluccini <lucabelluccini@gmail.com>
Date: Thu, 11 Oct 2018 00:59:00 +0200
Subject: [PATCH] add a filter in get_list_of_disks to prevent it to pick up
 devices like /dev/mmcblk0rpmb (https://lwn.net/Articles/682276/)

---
 ister_gui.py | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/ister_gui.py b/ister_gui.py
index 31f1b2d..cdd15fc 100644
--- a/ister_gui.py
+++ b/ister_gui.py
@@ -170,6 +170,10 @@ def get_list_of_disks():
     parts = output.split('\n')
     for part in parts:
         part = part.strip()
+        # This filter prevents the installer to stop on /dev/mmcblk0rpmb
+        # More on https://lwn.net/Articles/682276/
+        if part.startswith('mmc') and 'rpm' in part:
+            continue 
         if 'disk' in part:
             disks.append(part.split()[0])
         elif part.endswith('/'):
-- 
2.19.1

